{
    "formulas": [
      { "id": 1,"form": "transactions/form.php","name": "sum_base_items","label": "جمع پایه اقلام (ریال)","icon": "fa fa-calculator text-primary","fields": ["item_total_price_melted","item_total_price_manufactured","item_total_price_bullion","item_total_price_coin","item_total_price_jewelry"],"formula": "item_total_price_melted + item_total_price_manufactured + item_total_price_bullion + item_total_price_coin + item_total_price_jewelry"},
      { "id": 2,"form": "transactions/form.php","name": "sum_profit_wage_fee","label": "جمع سود/اجرت/کارمزد (ریال)","icon": "fa fa-coins text-success","fields": ["item_profit_amount_melted","item_fee_amount_melted","item_profit_amount_manufactured","item_fee_amount_manufactured","item_manufacturing_fee_amount_manufactured","item_profit_amount_bullion","item_fee_amount_bullion","item_profit_amount_coin","item_profit_amount_jewelry","item_fee_amount_jewelry"],"formula": "item_profit_amount_melted + item_fee_amount_melted + item_profit_amount_manufactured + item_fee_amount_manufactured + item_manufacturing_fee_amount_manufactured + item_profit_amount_bullion + item_fee_amount_bullion + item_profit_amount_coin + item_profit_amount_jewelry + item_fee_amount_jewelry"},
      { "id": 3,"form": "transactions/form.php","name": "sum_general_tax","label": "جمع مالیات عمومی (ریال)","icon": "fa fa-percent text-warning","fields": ["item_general_tax_melted","item_general_tax_manufactured","item_general_tax_bullion","item_general_tax_coin","item_general_tax_jewelry"],"formula": "item_general_tax_melted + item_general_tax_manufactured + item_general_tax_bullion + item_general_tax_coin + item_general_tax_jewelry"},
      { "id": 4,"form": "transactions/form.php","name": "sum_before_vat","label": "جمع قبل از ارزش افزوده (ریال)","icon": "fa fa-minus text-secondary","fields": ["sum_base_items","sum_profit_wage_fee","sum_general_tax"],"formula": "sum_base_items + sum_profit_wage_fee + sum_general_tax"},
      { "id": 5,"form": "transactions/form.php","name": "sum_vat","label": "مالیات بر ارزش افزوده کل (ریال)","icon": "fa fa-receipt text-info","fields": ["item_vat_melted","item_vat_manufactured","item_vat_bullion","item_vat_coin","item_vat_jewelry"],"formula": "item_vat_melted + item_vat_manufactured + item_vat_bullion + item_vat_coin + item_vat_jewelry"},
      { "id": 6,"form": "transactions/form.php","name": "final_payable","label": "مبلغ نهایی قابل پرداخت (ریال)","icon": "fa fa-wallet text-danger","fields": ["sum_before_vat","sum_vat"],"formula": "sum_before_vat + sum_vat"},
      { "id": 7, "form": "calculator/index.php", "name": "price_per_real_gram", "label": "قیمت ۱ گرم عیار واقعی", "formula": "calc_mazaneh * calc_carat / 750" },
      { "id": 8, "form": "calculator/index.php", "name": "base_gold_value", "label": "ارزش پایه طلا", "formula": "calc_weight * price_per_real_gram" },
      { "id": 9, "form": "calculator/index.php", "name": "profit_amount", "label": "مبلغ سود", "formula": "base_gold_value * calc_profit_percent / 100" },
      { "id": 10, "form": "calculator/index.10.php", "name": "commission_amount", "label": "مبلغ کارمزد", "formula": "base_gold_value * calc_commission_percent / 100" },
      { "id": 11, "form": "calculator/index.php", "name": "tax_amount", "label": "مبلغ مالیات", "formula": "base_gold_value * calc_tax_percent / 100" },
      { "id": 12, "form": "calculator/index.php", "name": "final_price", "label": "قیمت نهایی پیشنهادی", "formula": "base_gold_value + profit_amount + commission_amount + tax_amount + calc_extra_costs" },
      { "id": 13, "form": "inventory/index.php", "name": "total_weight_grams", "label": "جمع کل وزن واقعی (گرم)", "formula": "sum(weightInventory[].total_weight_grams)" },
      { "id": 14, "form": "inventory/index.php", "name": "total_value_weight", "label": "جمع کل ارزش وزنی (ریال)", "formula": "sum(weightInventory[].value_display_raw)" },
      { "id": 15, "form": "inventory/index.php", "name": "overall_avg_buy_price_1g", "label": "میانگین خرید هر گرم طلا (ریال)", "formula": "overallAvgBuyPrice1g" },
      { "id": 16, "form": "inventory/index.php", "name": "profit_loss_per_gram", "label": "سود/زیان فعلی هر گرم (ریال)", "formula": "latestMazanehPrice - overallAvgBuyPrice1g" },
      { "id": 17, "form": "transactions/form.php", "group": "melted", "name": "unit_price_melted", "label": "قیمت واحد آبشده", "formula": "mazaneh_price / 4.3318", "fields": ["mazaneh_price"], "output_field": "item_unit_price_melted", "priority": 1 },
      { "id": 18, "form": "transactions/form.php", "group": "melted", "name": "weight_750_melted", "label": "وزن به عیار 750", "formula": "item_weight_scale_melted * item_carat_melted / 750", "fields": ["item_weight_scale_melted", "item_carat_melted"], "output_field": "item_weight_750_melted", "priority": 2 },
      { "id": 19, "form": "transactions/form.php", "group": "melted", "name": "item_total_price_melted", "label": "قیمت کل آبشده", "formula": "item_weight_750_melted * item_unit_price_melted", "fields": ["item_weight_750_melted", "item_unit_price_melted"], "output_field": "item_total_price_melted", "priority": 3 },
      { "id": 20, "form": "transactions/form.php", "group": "melted", "name": "item_profit_amount_melted", "label": "مبلغ سود آبشده", "formula": "item_total_price_melted * item_profit_percent_melted / 100", "fields": ["item_total_price_melted", "item_profit_percent_melted"], "output_field": "item_profit_amount_melted", "priority": 4 },
      { "id": 21, "form": "transactions/form.php", "group": "melted", "name": "item_fee_amount_melted", "label": "مبلغ کارمزد آبشده", "formula": "item_total_price_melted * item_fee_percent_melted / 100", "fields": ["item_total_price_melted", "item_fee_percent_melted"], "output_field": "item_fee_amount_melted", "priority": 4 },
      { "id": 22, "form": "transactions/form.php", "group": "manufactured", "name": "weight_750_manufactured", "label": "وزن به عیار 750", "formula": "item_weight_scale_manufactured * item_carat_manufactured / 750", "fields": ["item_weight_scale_manufactured", "item_carat_manufactured"], "output_field": "item_weight_750_manufactured", "priority": 2 },
      { "id": 23, "form": "transactions/form.php", "group": "manufactured", "name": "item_total_price_manufactured", "label": "مبلغ کل ساخته شده", "formula": "item_weight_750_manufactured * item_unit_price_manufactured", "fields": ["item_weight_750_manufactured", "item_unit_price_manufactured"], "output_field": "item_total_price_manufactured", "priority": 3 },
      { "id": 24, "form": "transactions/form.php", "group": "manufactured", "name": "item_profit_amount_manufactured", "label": "مبلغ سود ساخته شده", "formula": "item_total_price_manufactured * item_profit_percent_manufactured / 100", "fields": ["item_total_price_manufactured", "item_profit_percent_manufactured"], "output_field": "item_profit_amount_manufactured", "priority": 4 },
      { "id": 25, "form": "transactions/form.php", "group": "manufactured", "name": "item_fee_amount_manufactured", "label": "مبلغ کارمزد ساخته شده", "formula": "item_total_price_manufactured * item_fee_percent_manufactured / 100", "fields": ["item_total_price_manufactured", "item_fee_percent_manufactured"], "output_field": "item_fee_amount_manufactured", "priority": 4 },
      { "id": 26, "form": "transactions/form.php", "group": "coin", "name": "item_total_price_coin", "label": "قیمت کل سکه", "formula": "item_quantity_coin * item_unit_price_coin", "fields": ["item_quantity_coin", "item_unit_price_coin"], "output_field": "item_total_price_coin", "priority": 1 },
      { "id": 27, "form": "transactions/form.php", "group": "coin", "name": "item_profit_amount_coin", "label": "مبلغ سود سکه", "formula": "item_total_price_coin * item_profit_percent_coin / 100", "fields": ["item_total_price_coin", "item_profit_percent_coin"], "output_field": "item_profit_amount_coin", "priority": 2 },
      { "id": 28, "form": "transactions/form.php", "group": "bullion", "name": "weight_750_bullion", "label": "وزن به عیار 750", "formula": "item_weight_scale_bullion * item_carat_bullion / 750", "fields": ["item_weight_scale_bullion", "item_carat_bullion"], "output_field": "item_weight_750_bullion" },
      { "id": 29, "form": "transactions/form.php", "group": "bullion", "name": "item_total_price_bullion", "label": "قیمت کل شمش طلا", "formula": "item_weight_750_bullion * item_unit_price_bullion", "fields": ["item_weight_750_bullion", "item_unit_price_bullion"], "output_field": "item_total_price_bullion" },
      { "id": 30, "form": "transactions/form.php", "group": "bullion", "name": "item_profit_amount_bullion", "label": "مبلغ سود شمش طلا", "formula": "item_total_price_bullion * item_profit_percent_bullion / 100", "fields": ["item_total_price_bullion", "item_profit_percent_bullion"], "output_field": "item_profit_amount_bullion" },
      { "id": 33, "form": "transactions/form.php", "group": "jewelry", "name": "item_total_price_jewelry", "label": "مبلغ کل جواهر", "formula": "item_weight_carat_jewelry * item_unit_price_jewelry", "fields": ["item_weight_carat_jewelry", "item_unit_price_jewelry"], "output_field": "item_total_price_jewelry" },
      { "id": 34, "form": "transactions/form.php", "group": "jewelry", "name": "item_profit_amount_jewelry", "label": "مبلغ سود جواهر", "formula": "item_total_price_jewelry * item_profit_percent_jewelry / 100", "fields": ["item_total_price_jewelry", "item_profit_percent_jewelry"], "output_field": "item_profit_amount_jewelry" },
      { "id": 35, "form": "transactions/form.php", "group": "manufactured", "name": "item_unit_price_manufactured", "label": "مبلغ واحد ساخته شده", "formula": "mazaneh_price / 4.3318", "fields": ["mazaneh_price"], "output_field": "item_unit_price_manufactured", "priority": 1 },
      { "id": 36, "form": "transactions/form.php", "group": "manufactured", "name": "item_fee_amount_manufactured", "label": "مبلغ کارمزد ساخته شده", "formula": "item_total_price_manufactured * item_fee_percent_manufactured / 100", "fields": ["item_total_price_manufactured", "item_fee_percent_manufactured"], "output_field": "item_fee_amount_manufactured", "priority": 4 },
      { "id": 37, "form": "transactions/form.php", "group": "manufactured", "name": "item_manufacturing_fee_amount_manufactured", "label": "مبلغ اجرت ساخته شده", "formula": "item_total_price_manufactured * item_manufacturing_fee_rate_manufactured / 100", "fields": ["item_total_price_manufactured", "item_manufacturing_fee_rate_manufactured"], "output_field": "item_manufacturing_fee_amount_manufactured", "priority": 4 },
      { "id": 53, "form": "transactions/form.php", "group": "bullion", "name": "item_unit_price_bullion", "label": "قیمت واحد شمش طلا", "formula": "mazaneh_price / 4.3318", "fields": ["mazaneh_price"], "output_field": "item_unit_price_bullion" },
      { "id": 54, "form": "transactions/form.php", "group": "bullion", "name": "item_fee_amount_bullion", "label": "مبلغ کارمزد شمش طلا", "formula": "item_total_price_bullion * item_fee_percent_bullion / 100", "fields": ["item_total_price_bullion", "item_fee_percent_bullion"], "output_field": "item_fee_amount_bullion" },
       { "id": 72, "form": "transactions/form.php", "group": "jewelry", "name": "item_fee_amount_jewelry", "label": "مبلغ کارمزد جواهر", "formula": "item_total_price_jewelry * item_fee_percent_jewelry / 100", "fields": ["item_total_price_jewelry", "item_fee_percent_jewelry"], "output_field": "item_fee_amount_jewelry" },
      
      { "id": 1490, "form": "transactions/form.php", "group": "coin", "name": "item_fee_amount_coin", "label": "مبلغ کارمزد سکه", "formula": "item_total_price_coin * item_fee_percent_coin / 100", "fields": ["item_total_price_coin", "item_fee_percent_coin"], "output_field": "item_fee_amount_coin", "priority": 3 },
      
      { "id": 10001, "form": "inventory/index.php", "name": "capital_balance_percentage", "label": "درصد تراز عملکرد", "formula": "current / target * 100", "fields": ["current", "target"] },
      { "id": 10002, "form": "inventory/index.php", "name": "capital_balance_status", "label": "وضعیت تراز", "formula": "balance_percentage < 95 ? 'کمبود' : (balance_percentage > 105 ? 'مازاد' : 'نرمال')", "fields": ["balance_percentage"] },
      { "id": 10003, "form": "inventory/index.php", "name": "capital_balance_difference", "label": "اختلاف موجودی", "formula": "current - target", "fields": ["current", "target"] },
      { "id": 10004, "form": "inventory/index.php", "name": "capital_value_difference", "label": "ارزش اختلاف موجودی", "formula": "balance_difference * current_price_per_unit", "fields": ["balance_difference", "current_price_per_unit"] }
    ]
}
