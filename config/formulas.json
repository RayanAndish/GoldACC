{
    "formulas": [
      { "id": 1,"form": "transactions/form.php","name": "sum_base_items","label": "جمع پایه اقلام (ریال)","icon": "fa fa-calculator text-primary","fields": ["item_total_price_melted","item_total_price_manufactured","item_total_price_goldbullion","item_total_price_silverbullion","item_total_price_coin","item_total_price_jewelry"],"formula": "item_total_price_melted + item_total_price_manufactured + item_total_price_goldbullion + item_total_price_silverbullion + item_total_price_coin + item_total_price_jewelry"},
      { "id": 2,"form": "transactions/form.php","name": "sum_profit_wage_fee","label": "جمع سود/اجرت/کارمزد (ریال)","icon": "fa fa-coins text-success","fields": ["item_profit_amount_melted","item_fee_amount_melted","item_profit_amount_manufactured","item_fee_amount_manufactured","item_manufacturing_fee_amount_manufactured","item_profit_amount_goldbullion","item_fee_amount_goldbullion","item_profit_amount_silverbullion","item_fee_amount_silverbullion","item_profit_amount_coin","item_profit_amount_jewelry","item_fee_amount_jewelry"],"formula": "item_profit_amount_melted + item_fee_amount_melted + item_profit_amount_manufactured + item_fee_amount_manufactured + item_manufacturing_fee_amount_manufactured + item_profit_amount_goldbullion + item_fee_amount_goldbullion + item_profit_amount_silverbullion + item_fee_amount_silverbullion + item_profit_amount_coin + item_profit_amount_jewelry + item_fee_amount_jewelry"},
      { "id": 3,"form": "transactions/form.php","name": "sum_general_tax","label": "جمع مالیات عمومی (ریال)","icon": "fa fa-percent text-warning","fields": ["item_general_tax_melted","item_general_tax_manufactured","item_general_tax_goldbullion","item_general_tax_silverbullion","item_general_tax_coin","item_general_tax_jewelry"],"formula": "item_general_tax_melted + item_general_tax_manufactured + item_general_tax_goldbullion + item_general_tax_silverbullion + item_general_tax_coin + item_general_tax_jewelry"},
      { "id": 4,"form": "transactions/form.php","name": "sum_before_vat","label": "جمع قبل از ارزش افزوده (ریال)","icon": "fa fa-minus text-secondary","fields": ["sum_base_items","sum_profit_wage_fee","sum_general_tax"],"formula": "sum_base_items + sum_profit_wage_fee + sum_general_tax"},
      { "id": 5,"form": "transactions/form.php","name": "sum_vat","label": "مالیات بر ارزش افزوده کل (ریال)","icon": "fa fa-receipt text-info","fields": ["item_vat_melted","item_vat_manufactured","item_vat_goldbullion","item_vat_silverbullion","item_vat_coin","item_vat_jewelry"],"formula": "item_vat_melted + item_vat_manufactured + item_vat_goldbullion + item_vat_silverbullion + item_vat_coin + item_vat_jewelry"},
      { "id": 6,"form": "transactions/form.php","name": "final_payable","label": "مبلغ نهایی قابل پرداخت (ریال)","icon": "fa fa-wallet text-danger","fields": ["sum_before_vat","sum_vat"],"formula": "sum_before_vat + sum_vat"},
      { "id": 7, "form": "calculator/index.php", "name": "price_per_real_gram", "label": "قیمت ۱ گرم عیار واقعی", "formula": "calc_mazaneh * calc_carat / 750" },
      { "id": 8, "form": "calculator/index.php", "name": "base_gold_value", "label": "ارزش پایه طلا", "formula": "calc_weight * price_per_real_gram" },
      { "id": 9, "form": "calculator/index.php", "name": "profit_amount", "label": "مبلغ سود", "formula": "base_gold_value * calc_profit_percent / 100" },
      { "id": 10, "form": "calculator/index.php", "name": "commission_amount", "label": "مبلغ کارمزد", "formula": "base_gold_value * calc_commission_percent / 100" },
      { "id": 11, "form": "calculator/index.php", "name": "tax_amount", "label": "مبلغ مالیات", "formula": "base_gold_value * calc_tax_percent / 100" },
      { "id": 12, "form": "calculator/index.php", "name": "final_price", "label": "قیمت نهایی پیشنهادی", "formula": "base_gold_value + profit_amount + commission_amount + tax_amount + calc_extra_costs" },
      { "id": 13, "form": "inventory/index.php", "name": "total_weight_grams", "label": "جمع کل وزن واقعی (گرم)", "formula": "sum(weightInventory[].total_weight_grams)" },
      { "id": 14, "form": "inventory/index.php", "name": "total_value_weight", "label": "جمع کل ارزش وزنی (ریال)", "formula": "sum(weightInventory[].value_display_raw)" },
      { "id": 15, "form": "inventory/index.php", "name": "overall_avg_buy_price_1g", "label": "میانگین خرید هر گرم طلا (ریال)", "formula": "overallAvgBuyPrice1g" },
      { "id": 16, "form": "inventory/index.php", "name": "profit_loss_per_gram", "label": "سود/زیان فعلی هر گرم (ریال)", "formula": "latestMazanehPrice - overallAvgBuyPrice1g" },
      { "id": 17, "form": "transactions/form.php", "group": "melted", "name": "unit_price_melted", "label": "قیمت واحد آبشده", "formula": "mazaneh_price / 4.3318", "fields": ["mazaneh_price"], "output_field": "item_unit_price_melted" },
      { "id": 18, "form": "transactions/form.php", "group": "melted", "name": "weight_750_melted", "label": "وزن به عیار 750", "formula": "item_weight_scale_melted * item_carat_melted / 750", "fields": ["item_weight_scale_melted", "item_carat_melted"], "output_field": "item_weight_750_melted"},
      { "id": 19, "form": "transactions/form.php", "group": "melted", "name": "item_total_price_melted", "label": "قیمت کل آبشده", "formula": "item_weight_750_melted * item_unit_price_melted", "fields": ["item_weight_750_melted", "item_unit_price_melted"], "output_field": "item_total_price_melted" },
      { "id": 20, "form": "transactions/form.php", "group": "melted", "name": "item_profit_amount_melted", "label": "مبلغ سود آبشده", "formula": "item_total_price_melted * item_profit_percent_melted / 100", "fields": ["item_total_price_melted", "item_profit_percent_melted"], "output_field": "item_profit_amount_melted" },
      { "id": 21, "form": "transactions/form.php", "group": "melted", "name": "item_fee_amount_melted", "label": "مبلغ کارمزد آبشده", "formula": "item_total_price_melted * item_fee_percent_melted / 100", "fields": ["item_total_price_melted", "item_fee_percent_melted"], "output_field": "item_fee_amount_melted" },
      { "id": 22, "form": "transactions/form.php", "group": "manufactured", "name": "weight_750_manufactured", "label": "وزن به عیار 750", "formula": "item_weight_scale_manufactured * item_carat_manufactured / 750", "fields": ["item_weight_scale_manufactured", "item_carat_manufactured"], "output_field": "item_weight_750_manufactured" },
      { "id": 23, "form": "transactions/form.php", "group": "manufactured", "name": "item_total_price_manufactured", "label": "مبلغ کل ساخته شده", "formula": "item_weight_750_manufactured * item_unit_price_manufactured", "fields": ["item_weight_750_manufactured", "item_unit_price_manufactured"], "output_field": "item_total_price_manufactured" },
      { "id": 24, "form": "transactions/form.php", "group": "manufactured", "name": "item_profit_amount_manufactured", "label": "مبلغ سود ساخته شده", "formula": "item_total_price_manufactured * item_profit_percent_manufactured / 100", "fields": ["item_total_price_manufactured", "item_profit_percent_manufactured"], "output_field": "item_profit_amount_manufactured" },
      { "id": 25, "form": "transactions/form.php", "group": "manufactured", "name": "item_fee_amount_manufactured", "label": "مبلغ کارمزد ساخته شده", "formula": "item_total_price_manufactured * item_fee_percent_manufactured / 100", "fields": ["item_total_price_manufactured", "item_fee_percent_manufactured"], "output_field": "item_fee_amount_manufactured" },
      { "id": 26, "form": "transactions/form.php", "group": "coin", "name": "item_total_price_coin", "label": "قیمت کل سکه", "formula": "item_quantity_coin * item_unit_price_coin", "fields": ["item_quantity_coin", "item_unit_price_coin"], "output_field": "item_total_price_coin" },
      { "id": 27, "form": "transactions/form.php", "group": "coin", "name": "item_profit_amount_coin", "label": "مبلغ سود سکه", "formula": "item_total_price_coin * item_profit_percent_coin / 100", "fields": ["item_total_price_coin", "item_profit_percent_coin"], "output_field": "item_profit_amount_coin" },
      { "id": 28, "form": "transactions/form.php", "group": "goldbullion", "name": "weight_750_goldbullion", "label": "وزن به عیار 750", "formula": "item_weight_scale_goldbullion * item_carat_goldbullion / 750", "fields": ["item_weight_scale_goldbullion", "item_carat_goldbullion"], "output_field": "item_weight_750_goldbullion" },
      { "id": 29, "form": "transactions/form.php", "group": "goldbullion", "name": "item_total_price_goldbullion", "label": "قیمت کل شمش طلا", "formula": "item_weight_750_goldbullion * item_unit_price_goldbullion", "fields": ["item_weight_750_goldbullion", "item_unit_price_goldbullion"], "output_field": "item_total_price_goldbullion" },
      { "id": 30, "form": "transactions/form.php", "group": "goldbullion", "name": "item_profit_amount_goldbullion", "label": "مبلغ سود شمش طلا", "formula": "item_total_price_goldbullion * item_profit_percent_goldbullion / 100", "fields": ["item_total_price_goldbullion", "item_profit_percent_goldbullion"], "output_field": "item_profit_amount_goldbullion" },
      { "id": 31, "form": "transactions/form.php", "group": "silverbullion", "name": "item_total_price_silverbullion", "label": "قیمت کل شمش نقره", "formula": "item_weight_scale_silverbullion * item_unit_price_silverbullion", "fields": ["item_weight_scale_silverbullion", "item_unit_price_silverbullion"], "output_field": "item_total_price_silverbullion" },
      { "id": 32, "form": "transactions/form.php", "group": "silverbullion", "name": "item_profit_amount_silverbullion", "label": "مبلغ سود شمش نقره", "formula": "item_total_price_silverbullion * item_profit_percent_silverbullion / 100", "fields": ["item_total_price_silverbullion", "item_profit_percent_silverbullion"], "output_field": "item_profit_amount_silverbullion" },
      { "id": 33, "form": "transactions/form.php", "group": "jewelry", "name": "item_total_price_jewelry", "label": "مبلغ کل جواهر", "formula": "item_weight_carat_jewelry * item_unit_price_jewelry", "fields": ["item_weight_carat_jewelry", "item_unit_price_jewelry"], "output_field": "item_total_price_jewelry" },
      { "id": 34, "form": "transactions/form.php", "group": "jewelry", "name": "item_profit_amount_jewelry", "label": "مبلغ سود جواهر", "formula": "item_total_price_jewelry * item_profit_percent_jewelry / 100", "fields": ["item_total_price_jewelry", "item_profit_percent_jewelry"], "output_field": "item_profit_amount_jewelry" },
      { "id": 35, "form": "transactions/form.php", "group": "manufactured", "name": "item_unit_price_manufactured", "label": "مبلغ واحد ساخته شده", "formula": "mazaneh_price / 4.3318", "fields": ["mazaneh_price"], "output_field": "item_unit_price_manufactured" },
      { "id": 36, "form": "transactions/form.php", "group": "manufactured", "name": "item_fee_amount_manufactured", "label": "مبلغ کارمزد ساخته شده", "formula": "item_total_price_manufactured * item_fee_percent_manufactured / 100", "fields": ["item_total_price_manufactured", "item_fee_percent_manufactured"], "output_field": "item_fee_amount_manufactured" },
      { "id": 37, "form": "transactions/form.php", "group": "manufactured", "name": "item_manufacturing_fee_amount_manufactured", "label": "مبلغ اجرت ساخته شده", "formula": "item_total_price_manufactured * item_manufacturing_fee_rate_manufactured / 100", "fields": ["item_total_price_manufactured", "item_manufacturing_fee_rate_manufactured"], "output_field": "item_manufacturing_fee_amount_manufactured" },
      { "id": 53, "form": "transactions/form.php", "group": "goldbullion", "name": "item_unit_price_goldbullion", "label": "قیمت واحد شمش طلا", "formula": "mazaneh_price / 4.3318", "fields": ["mazaneh_price"], "output_field": "item_unit_price_goldbullion" },
      { "id": 54, "form": "transactions/form.php", "group": "goldbullion", "name": "item_fee_amount_goldbullion", "label": "مبلغ کارمزد شمش طلا", "formula": "item_total_price_goldbullion * item_fee_percent_goldbullion / 100", "fields": ["item_total_price_goldbullion", "item_fee_percent_goldbullion"], "output_field": "item_fee_amount_goldbullion" },
      { "id": 62, "form": "transactions/form.php", "group": "silverbullion", "name": "item_unit_price_silverbullion", "label": "قیمت واحد شمش نقره", "formula": "mazaneh_price / 4.3318", "fields": ["mazaneh_price"], "output_field": "item_unit_price_silverbullion" },
      { "id": 63, "form": "transactions/form.php", "group": "silverbullion", "name": "item_fee_amount_silverbullion", "label": "مبلغ کارمزد شمش نقره", "formula": "item_total_price_silverbullion * item_fee_percent_silverbullion / 100", "fields": ["item_total_price_silverbullion", "item_fee_percent_silverbullion"], "output_field": "item_fee_amount_silverbullion" },
      { "id": 72, "form": "transactions/form.php", "group": "jewelry", "name": "item_fee_amount_jewelry", "label": "مبلغ کارمزد جواهر", "formula": "item_total_price_jewelry * item_fee_percent_jewelry / 100", "fields": ["item_total_price_jewelry", "item_fee_percent_jewelry"], "output_field": "item_fee_amount_jewelry" },
      { "id": 101, "form": "transactions/form.php", "group": "melted", "name": "item_general_tax_melted", "label": "مالیات آبشده", "fields": ["item_total_price_melted", "product_tax_enabled", "product_tax_rate"], "formula": "(product_tax_enabled && product_tax_rate > 0) ? item_total_price_melted * product_tax_rate / 100 : 0", "output_field": "item_general_tax_melted" },
      { "id": 102, "form": "transactions/form.php", "group": "manufactured", "name": "item_general_tax_manufactured", "label": "مالیات ساخته شده", "fields": ["item_total_price_manufactured", "product_tax_enabled", "product_tax_rate"], "formula": "(product_tax_enabled && product_tax_rate > 0) ? item_total_price_manufactured * product_tax_rate / 100 : 0", "output_field": "item_general_tax_manufactured" },
      { "id": 103, "form": "transactions/form.php", "group": "coin", "name": "item_general_tax_coin", "label": "مالیات سکه", "fields": ["item_total_price_coin", "product_tax_enabled", "product_tax_rate"], "formula": "(product_tax_enabled && product_tax_rate > 0) ? item_total_price_coin * product_tax_rate / 100 : 0", "output_field": "item_general_tax_coin" },
      { "id": 104, "form": "transactions/form.php", "group": "goldbullion", "name": "item_general_tax_goldbullion", "label": "مالیات شمش طلا", "fields": ["item_total_price_goldbullion", "product_tax_enabled", "product_tax_rate"], "formula": "(product_tax_enabled && product_tax_rate > 0) ? item_total_price_goldbullion * product_tax_rate / 100 : 0", "output_field": "item_general_tax_goldbullion" },
      { "id": 105, "form": "transactions/form.php", "group": "silverbullion", "name": "item_general_tax_silverbullion", "label": "مالیات شمش نقره", "fields": ["item_total_price_silverbullion", "product_tax_enabled", "product_tax_rate"], "formula": "(product_tax_enabled && product_tax_rate > 0) ? item_total_price_silverbullion * product_tax_rate / 100 : 0", "output_field": "item_general_tax_silverbullion" },
      { "id": 106, "form": "transactions/form.php", "group": "jewelry", "name": "item_general_tax_jewelry", "label": "مالیات جواهر", "fields": ["item_total_price_jewelry", "product_tax_enabled", "product_tax_rate"], "formula": "(product_tax_enabled && product_tax_rate > 0) ? item_total_price_jewelry * product_tax_rate / 100 : 0", "output_field": "item_general_tax_jewelry" },
      { "id": 201, "form": "transactions/form.php", "group": "melted", "name": "item_vat_melted", "label": "ارزش افزوده آبشده", "fields": ["item_profit_amount_melted", "item_fee_amount_melted", "product_vat_enabled", "product_vat_rate"], "formula": "(product_vat_enabled && product_vat_rate > 0) ? (item_profit_amount_melted + item_fee_amount_melted) * product_vat_rate / 100 : 0", "output_field": "item_vat_melted" },
      { "id": 202, "form": "transactions/form.php", "group": "manufactured", "name": "item_vat_manufactured", "label": "ارزش افزوده ساخته شده", "fields": ["item_manufacturing_fee_amount_manufactured", "item_profit_amount_manufactured", "item_fee_amount_manufactured", "product_vat_enabled", "product_vat_rate"], "formula": "(product_vat_enabled && product_vat_rate > 0) ? (item_manufacturing_fee_amount_manufactured + item_profit_amount_manufactured + item_fee_amount_manufactured) * product_vat_rate / 100 : 0", "output_field": "item_vat_manufactured" },
      { "id": 203, "form": "transactions/form.php", "group": "coin", "name": "item_vat_coin", "label": "ارزش افزوده سکه", "fields": ["item_profit_amount_coin", "item_fee_amount_coin", "product_vat_enabled", "product_vat_rate"], "formula": "(product_vat_enabled && product_vat_rate > 0) ? (item_profit_amount_coin + item_fee_amount_coin) * product_vat_rate / 100 : 0", "output_field": "item_vat_coin" },
      { "id": 204, "form": "transactions/form.php", "group": "goldbullion", "name": "item_vat_goldbullion", "label": "ارزش افزوده شمش طلا", "fields": ["item_profit_amount_goldbullion", "item_fee_amount_goldbullion", "product_vat_enabled", "product_vat_rate"], "formula": "(product_vat_enabled && product_vat_rate > 0) ? (item_profit_amount_goldbullion + item_fee_amount_goldbullion) * product_vat_rate / 100 : 0", "output_field": "item_vat_goldbullion" },
      { "id": 205, "form": "transactions/form.php", "group": "silverbullion", "name": "item_vat_silverbullion", "label": "ارزش افزوده شمش نقره", "fields": ["item_profit_amount_silverbullion", "item_fee_amount_silverbullion", "product_vat_enabled", "product_vat_rate"], "formula": "(product_vat_enabled && product_vat_rate > 0) ? (item_profit_amount_silverbullion + item_fee_amount_silverbullion) * product_vat_rate / 100 : 0", "output_field": "item_vat_silverbullion" },
      { "id": 206, "form": "transactions/form.php", "group": "jewelry", "name": "item_vat_jewelry", "label": "ارزش افزوده جواهر", "fields": ["item_profit_amount_jewelry", "item_fee_amount_jewelry", "product_vat_enabled", "product_vat_rate"], "formula": "(product_vat_enabled && product_vat_rate > 0) ? (item_profit_amount_jewelry + item_fee_amount_jewelry) * product_vat_rate / 100 : 0", "output_field": "item_vat_jewelry" },
      { "id": 9001, "form": "transactions/form.php", "name": "total_general_tax", "label": "جمع کل مالیات", "fields": [
        "item_general_tax_melted",
        "item_general_tax_manufactured",
        "item_general_tax_coin",
        "item_general_tax_goldbullion",
        "item_general_tax_silverbullion",
        "item_general_tax_jewelry"
      ], "formula": "item_general_tax_melted + item_general_tax_manufactured + item_general_tax_coin + item_general_tax_goldbullion + item_general_tax_silverbullion + item_general_tax_jewelry", "output_field": "total_general_tax" },
      { "id": 9002, "form": "transactions/form.php", "name": "total_vat", "label": "جمع کل ارزش افزوده", "fields": [
        "item_vat_melted",
        "item_vat_manufactured",
        "item_vat_coin",
        "item_vat_goldbullion",
        "item_vat_silverbullion",
        "item_vat_jewelry"
      ], "formula": "item_vat_melted + item_vat_manufactured + item_vat_coin + item_vat_goldbullion + item_vat_silverbullion + item_vat_jewelry", "output_field": "total_vat" },
      
      { "id": 10001, "form": "inventory/index.php", "name": "capital_balance_percentage", "label": "درصد تراز عملکرد", "formula": "current / target * 100", "fields": ["current", "target"] },
      { "id": 10002, "form": "inventory/index.php", "name": "capital_balance_status", "label": "وضعیت تراز", "formula": "balance_percentage < 95 ? 'کمبود' : (balance_percentage > 105 ? 'مازاد' : 'نرمال')", "fields": ["balance_percentage"] },
      { "id": 10003, "form": "inventory/index.php", "name": "capital_balance_difference", "label": "اختلاف موجودی", "formula": "current - target", "fields": ["current", "target"] },
      { "id": 10004, "form": "inventory/index.php", "name": "capital_value_difference", "label": "ارزش اختلاف موجودی", "formula": "balance_difference * current_price_per_unit", "fields": ["balance_difference", "current_price_per_unit"] }
    ]
  }
  